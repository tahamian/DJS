<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: library.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: library.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
*@file Used to get the playlist of music
*&lt;p> Assumptions
* &lt;ul style="list-style: none;">
*  &lt;li>The music files are audio files
*  &lt;li>the music files are in the src
* &lt;/ul>
* @module library
* @version 1.0
*/

/**
 * File system library
 * @member {String} fs
 */
var fs = require('fs')
/**
 * Path library
 * @member {String} path
 */
var path = require('path')

/**
 * @member verbose {boolean} determines if verbose logging is enabled
*/
let verbose = false

/**
 * Set the verbose flag
 * @function setVerbose
 * @param value {boolean} verbose value
*/
function setVerbose(value) {
    if (value != true &amp;&amp; value != false) return

    verbose = value
}

/**
 * Return the next n song choices (the number n of song choices is set in server.js)
 * @function getSongs
 * @param (String) the pathname of where the music is
 * @return (Array) a list of n songs that will be the new voting options
*/
function getSongs(p) {
	return fs.readdirSync(p)
}

/**
 * Save all the album art data in the public folder so that the client can
 * load and display them
 * @function saveAlbumArt
 * @param metadata {array} List of metadata items of the form:&lt;br>
 * [&lt;br>&amp;emsp;{picture, fileName},&lt;br>&amp;emsp;{picture, fileName}&lt;br>]
*/
function saveAlbumArt(data) {
	if (verbose) console.log(data.length);

	// For each album art
	for (let i = 0; i &lt; data.length; i++) {

		var rawData = data [i].picture
		var savePath = __dirname + '/public/artwork/' + data [i].fileName + '.png'

        // Write album art data to file
		fs.writeFileSync(savePath, rawData, 'base64')
		if (verbose) console.log('Saving album art for: ' + data[i].fileName)

	}
}

/**
 * Clear all the album art that is currently located in the public folder
 * @function clearAlbumArt
 * @param albumPaths {String []} array of paths to clear
 * @param done {callback} callback function
*/
function clearAlbumArt(albumPaths, done) {
	// Maybe we should just clear ALL artwork?
	for(var i = 0; i &lt; albumPaths.length; i++) {
		fs.unlinkSync(__dirname + albumPaths [i])
	}

	done()

}

exports.getSongs = getSongs
exports.saveAlbumArt = saveAlbumArt
exports.clearAlbumArt = clearAlbumArt
exports.setVerbose = setVerbose
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-error-handler.html">error-handler</a></li><li><a href="module-flags.html">flags</a></li><li><a href="module-home.html">home</a></li><li><a href="module-library.html">library</a></li><li><a href="module-metadata.html">metadata</a></li><li><a href="module-player.html">player</a></li><li><a href="module-server.html">server</a></li><li><a href="module-voter.html">voter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue Dec 06 2016 15:45:51 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
