<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: public/home.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: public/home.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
*@file This module is for the UI
*&lt;p> Assumptions
* &lt;ul style="list-style: none;">
*  &lt;li>User h browser can fun javascript
*  &lt;li>
* &lt;/ul>
 * @module home
 * @version 1.0
 * @summary A concise summary.
 */

$(function() {
/**
*@member {String} id - is the value of the user id that will be used to store cookie information
*/
var id = Cookies.get('id')


    var socket = io.connect()

    if (!id) {
        socket.emit('connect-request', null)
    } else {
        socket.emit('connect-request', id)
    }

    /**
     * @function socket.on()
     *Finalize the connection by setting the ID cookie
     *@param {String} 'connect-response' - String that is used by socket.on that updates the the cookies when a user clicks
     *@param {Array} data - an array of the song titles
     */
    socket.on('connect-response', (data) => {
        Cookies.remove('id')
        Cookies.set('id', data)
    })


    /**
     * @function socket.on()
     *Update the UI to include the new songs
     *@param {String} 'update-songs' - String that is used by socket.on that updates the song list
     *@param {Array} data - an array of the song titles
    */
    socket.on('update-songs', (data) => {
        console.log('Updating the songs:\n' + data)															//updates the new songs

        // Clear all current songs
        $('#list-div').empty()

        // For each new song, create a list element and append it
        $.each(data, function (i) {
            /**
             * @member {any}
             *
             * Create a div that contains elements for one song:
             * a button and a vote total display
             */
            var container = $('&lt;div />')
                .addClass('list-item-div')
            /**
             * @member {jQuery}
             *
             * Create a button
             */
            var button = $('&lt;button  />')
                .addClass('list-group-item list-group-item-action')
                .appendTo(container) // Append to the song list
                .text(data[i]) // Song title
                .click(function () { // Click function to emit a vote event to the server
                    socket.emit('vote', {
                        'id': Cookies.get('id'),
                        'song': data[i]
                    })
                })
            /**
             * @member {any}
             *
             * Creates a line break
             */
            var brk = $('&lt;br />')
                .appendTo(container)
            /**
             * @var {any}
             *
             * Create a &lt;p> that holds the current vote total for this song
             */

            var count = $('&lt;p />')
                .text('0')
                .addClass('vote-count')
                .appendTo(container)

            // Append the div to the list1
            container.appendTo($('#list-div'))

        })

    })
    /**
     * @function socket.on()
    * socket library is used to update songs
    *@param {String} 'update-votes' - String that is used by socket.on that updates the votes
    *@param {Array} data - an array of the song titles
     */
    socket.on('update-votes', (data) => {

        // List of all the container items
        var listItems = document.getElementById('list-div').childNodes

        // Reset all current vote counts to 0
        for (var i = 0; i &lt; listItems.length; i++) {
            listItems[i].childNodes[2].innerHTML = '0'
        }

        // For each vote item
        for (var i = 0; i &lt; data.length; i++) {
            var currentSong = data[i]

            // Find the correct html element and update the DOM
            for (var j = 0; j &lt; listItems.length; j++) {
                if (listItems[j].childNodes[0].innerHTML == data[i]) {
                    listItems[j].childNodes[2].innerHTML = parseInt(listItems[j].childNodes[2].innerHTML) + 1
                }
            }
        }

    })
})
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-args.html">args</a></li><li><a href="module-home.html">home</a></li><li><a href="module-library.html">library</a></li><li><a href="module-player.html">player</a></li><li><a href="module-server.html">server</a></li><li><a href="module-voter.html">voter</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Sun Nov 13 2016 23:52:13 GMT-0500 (Eastern Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
